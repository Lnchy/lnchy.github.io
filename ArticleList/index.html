<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8">
		<title>文章列表</title>
		<link rel="stylesheet" href="css/md.css?v=1.0"/>
		<style>
			#fanhui{
				width: 30px;
				height: 30px;
				background: url(css/return.png);
				background-size: 30px 30px;
				position: absolute;
				top:10px;
				cursor: pointer;
			}
		</style>
		<script src="../css/showdown.min.js"></script>
	</head>
	<script>
		//接受url参数
		function GetQueryString(name)
		{
		     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
		     var r = window.location.search.substr(1).match(reg);
		     if(r!=null)return  unescape(r[2]); return null;
		}
		//显示文章的方法
		function show(val){
			//隐藏文章列表
			$("#Alist").fadeOut(100);
			//显示文章
			$("#wz").fadeIn(300);
			$.get("ArticleList/list.html",function(data){
				//获取文章数据
				var list = data[val];
				//显示到页面中
				$.get("ArticleList/atlist/"+list.content,function(val){
					//初始化转换器
					var converter = new showdown.Converter();
					$("#wzcontent").html(converter.makeHtml(val));
					$("#wztitle").text(list.title);
					$("#wzdate").text(list.date);
				});
			},"json");
		}
		$(function(){
			$.get("ArticleList/list.html",function(data){
				$.each(data, function(i,v) {
					var lb = "<a href='javascript:show("+i+")'><li id='"+i+"'><span class='liTitle'>"+v.title+"</span><span class='liDate'>"+v.date+"</span></li></a>";
					$("#arlist > ul").append(lb);
				});
			},"json");
			
			//点击隐藏文章并返回列表
			$("#fanhui").click(function(){
				$("#wz").fadeOut(300);
				$("#Alist").fadeIn(300);
			});
			
		})
	</script>
	<body>
		<div id="arlist">
			<ul id="Alist" >
			</ul>
			
			<div id="wz" style="width: 90%; margin: 0px auto;display: none;position: relative;bottom: 0px;">
				<div id="fanhui"></div>
				<h1 id="wztitle" align="center"></h1>
				<h5 id="wzdate" align="center" style="color: #666666;"></h5>
				<hr>
				<p id="wzcontent" style="min-height: 700px;"></p>
				<hr>
			</div>
			
		</div>
	</body>
</html>
